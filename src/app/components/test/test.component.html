<main id="main" class="main">
  <div class="pagetitle"></div>
  <section class="section">
    <div class="row">
      <div class="col-lg-12">
        <div class="card">
          <div class="card-body">
            <h1 class="card-title">Create Recipe</h1><br>
            <div class="container">
              <div class="row">
                <div class="col-md-4">
                  <div class="form-group">
                    <label for="product-name">Select Product</label>
                    <select class="form-control" id="productselect" [(ngModel)]="selectedProduct"
                      (change)="openRecipeScreen()">
                      <option value="">-- Select --</option>
                      <option value="Bottle">Bottle</option>
                      <option value="Household">Household</option>
                      <option value="Polythiene">Polythiene</option>
                    </select>
                  </div>
                </div><br>
                <div class="row col-lg-12" *ngIf="selectedProduct">
                  <div class="row">
                    <ng-container *ngFor="let recipe of recipes; let i = index">
                      <div class="col-md-4"><br>
                        <div class="description">
                          <div *ngIf="selectedProductDisplay">
                            <h6>Create Recipe {{ i + 1 }} for {{ selectedProductDisplay }} Product</h6>
                          </div>
                          <div class="form-group"><br>
                            <label for="recipeName{{ i }}">Recipe Name</label>
                            <input type="text" class="form-control" placeholder="Enter here" id="recipeName{{ i }}" [(ngModel)]="recipe.name">
                          </div>
                          <div class="form-group">
                            <label for="typeOfPolymer">Type of Polymer</label>
                            <select class="form-control" id="typeOfPolymer" [(ngModel)]="selectedTypeOfPolymer">
                              <option value="">-- Select --</option>
                              <option *ngFor="let polymer of typesOfPolymers" [value]="polymer">{{ polymer }}</option>
                            </select>
                          </div>
                          <div class="form-group">
                            <label for="customerName">Customer Name</label>
                            <select class="form-control" id="customerName" [(ngModel)]="selectedCustomerName">
                              <option value="">-- Select --</option>
                              <option *ngFor="let customer of customerNames" [value]="customer">{{ customer }}</option>
                            </select>
                          </div>
                          <div class="form-group">
                            <label for="rawElement">Raw Element</label>
                            <select class="form-control" id="rawElement" [(ngModel)]="selectedRawElement">
                              <option value="">-- Select --</option>
                              <option *ngFor="let element of rawElements" [value]="element">{{ element }}</option>
                            </select>
                          </div>
                          <div class="form-group">
                            <label for="recipeRawMaterial{{ i }}">Raw Material</label>
                            <select class="form-control" id="recipeRawMaterial{{ i }}"
                              [(ngModel)]="recipe.selectedRawMaterial">
                              <option value="">-- Select --</option>
                              <option *ngFor="let material of rawMaterials" [value]="material.id">{{ material.name }}</option>
                            </select>
                          </div><br>
                          <button class="btn btn-primary" style="margin-inline: 5px;" (click)="addRecipe()">Add Recipe</button>
                          <button class="btn btn-danger" style="margin-inline: 5px;"  (click)="removeRecipe(i)">Remove Recipe</button>
                        </div>
                      </div>
                    </ng-container>
                  </div>
                </div>
                <div class="col-md-4"><br>
                  <button class="btn btn-primary" (click)="createProduct()">Create</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <section class="section">
    <div class="container"><br>
      <h4>Created Recipes</h4><br>
      <table>
        <thead>
          <tr>
            <!-- <th>Product</th> -->
            <th>Recipe Name</th>
            <th>Raw Material</th>
            <th>Type of Polymer</th>
            <th>Customer Name</th>
            <th>Raw Element</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let recipe of createdRecipes; let i = index">
            <!-- <td>{{ recipe }}</td> -->
            <td>{{ recipe.name }} Recipe {{ i + 1 }}</td>
            <td>{{ recipe.selectedRawMaterial }}</td>
            <td>{{ recipe.selectedTypeOfPolymer }}</td>
            <td>{{ recipe.selectedCustomerName }}</td>
            <td>{{ recipe.selectedRawElement }}</td>
            <td>
              <button type="button" class="btn btn-primary" style="margin-inline: 5px;" (click)="editRecipe(i)">Edit</button>
              <button type="button" class="btn btn-danger" (click)="deleteRecipe(i)">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>
</main>
