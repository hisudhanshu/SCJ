<main id="main" class="main" style="font-family: Georgia, 'Times New Roman', Times, serif;">
    <div class="pagetitle"></div>
    <section class="section">
        <div class="row">
            <div class="col-lg-12">
                <div class="card"><br>
                    <div class="card-body" style="font-family: Georgia, 'Times New Roman', Times, serif;">
                        <h1 class="card-title" style="font-family: Georgia, 'Times New Roman', Times, serif;">
                            <strong>List of Created Recipe</strong>
                        </h1>
                        <div class="col-md-4"
                            style="font-family: Georgia, 'Times New Roman', Times, serif; margin-inline: 750px;">
                            <form class="search-form d-flex align-items-center">
                                <div class="input-group">
                                    <input class="form-control" [(ngModel)]="searchKeyword" id="searchKeyword"
                                        name="query" type="text" placeholder="Search here.."
                                        title="Enter search keyword" (input)="searchRecipes()" />
                                    <button type="submit" class="btn btn-primary" title="Search">Search</button>
                                </div>
                            </form>
                        </div><br>
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="row">
                                    <div class="col-md-12">
                                       <!-- Product Details Table -->
<table style="font-family: Georgia, 'Times New Roman', Times, serif;">
    <thead>
        <tr>
            <th>ID</th>
            <th>Product Name</th>
            <th>Product Category</th>
            <th>Product Brand</th>
            <th>Customer Type</th>
            <th>Client Type</th>
            <th>Details</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let recipe of filteredRecipes; let i = index;">
            <td>{{ recipe.Id }}</td>
            <td>
                <ng-container *ngIf="recipe.isEditing; else displayData">
                    <input type="text" [(ngModel)]="recipe.name" class="form-control">
                </ng-container>
                <ng-template #displayData>{{ recipe.name }}</ng-template>
            </td>
            <td>{{ recipe.category }}</td>
            <td>{{ recipe.brand }}</td>
            <td>{{ recipe.customer }}</td>
            <td>{{ recipe.clienttype }}</td>
            <td>
                <button class="bi bi-info-circle" style="margin-inline-start: 40px;"
                    data-bs-toggle="modal" data-bs-target="#exampleModalToggle" (click)="openModal(recipe)"></button>
            </td>
            <td>
                <button *ngIf="!recipe.isEditing" class="btn btn-sm btn-primary" style="margin-inline: 3px;"
                    (click)="editRecipe(recipe)">Edit</button>
                <button *ngIf="recipe.isEditing" class="btn btn-sm btn-success" style="margin-inline: 3px;"
                    (click)="updateRecipe(recipe)">Update</button>
                <button *ngIf="!recipe.isEditing" class="btn btn-sm btn-danger" style="margin-inline: 3px;"
                    (click)="deleteRecipe(recipe)">Delete</button>
            </td>
        </tr>
    </tbody>
</table>

<!-- Details Modal -->
<div class="modal fade" id="exampleModalToggle" aria-hidden="true" aria-labelledby="exampleModalToggleLabel"
    tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-fullscreen">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title fs-5" id="mexampleModalToggleLabel"
                    style="font-family: Georgia, 'Times New Roman', Times, serif; margin-inline: 600px;">
                    <strong>Created Product Details</strong>
                </h2>
            </div>
            <div class="modal-body">
                <table class="table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Product Name</th>
                            <th>Product Category</th>
                            <th>Product Brand</th>
                            <th>Customer Type</th>
                            <th>Client Type</th>
                            <th>Material Name</th>
                            <th>Code</th>
                            <th>Material Type</th>
                            <th>Quantity</th>
                            <th>Cost</th>
                            <th>Vendor</th>
                            <th>Inventory</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>{{ selectedRecipe?.Id }}</td>
                            <td>{{ selectedRecipe?.name }}</td>
                            <td>{{ selectedRecipe?.category }}</td>
                            <td>{{ selectedRecipe?.brand }}</td>
                            <td>{{ selectedRecipe?.customer }}</td>
                            <td>{{ selectedRecipe?.clienttype }}</td>
                            <td>{{ selectedRecipe?.material }}</td>
                            <td>{{ selectedRecipe?.mcode }}</td>
                            <td>{{ selectedRecipe?.mtype }}</td>
                            <td>{{ selectedRecipe?.mquantity }}</td>
                            <td>{{ selectedRecipe?.mcost }}</td>
                            <td>{{ selectedRecipe?.mvendor }}</td>
                            <td>{{ selectedRecipe?.minventory }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal"
                    aria-label="Close">Close</button>
            </div>
        </div>
    </div>
</div>
