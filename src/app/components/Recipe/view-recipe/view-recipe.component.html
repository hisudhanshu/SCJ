<main id="main" class="main" style="font-family: Georgia, 'Times New Roman', Times, serif;">
    <div class="pagetitle"></div>
    <section class="section">
        <div class="row">
            <div class="col-lg-12">
                <div class="card"><br>
                    <div class="card-body" style="font-family: Georgia, 'Times New Roman', Times, serif;">
                        <h1 class="card-title" style="font-family: Georgia, 'Times New Roman', Times, serif;">
                            <strong>List of Created Recipe</strong>
                        </h1>
                        <div class="col-md-4"
                            style="font-family: Georgia, 'Times New Roman', Times, serif; margin-inline: 750px;">
                            <form class="search-form d-flex align-items-center">
                                <div class="input-group">
                                    <input class="form-control" [(ngModel)]="searchKeyword" id="searchKeyword"
                                        name="query" type="text" placeholder="Search here.."
                                        title="Enter search keyword" (input)="searchRecipes()" />
                                    <button type="submit" class="btn btn-primary" title="Search">Search</button>
                                </div>
                            </form>
                        </div><br>
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="row">
                                    <div class="col-md-12">
                                      <!-- Product Table -->
<table style="font-family: Georgia, 'Times New Roman', Times, serif;">
    <thead>
      <tr>
        <th>ID</th>
        <th>Product Name</th>
        <th>Product Category</th>
        <th>Product Brand</th>
        <th>Customer Type</th>
        <th>Client Type</th>
        <th>Details</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <ng-container *ngFor="let recipe of filteredRecipes; let i = index;">
        <tr *ngIf="!hasDuplicateId(recipe.Id)">
          <td>{{ recipe.Id }}</td>
          <td>
            <ng-container *ngIf="recipe.isEditing; else displayData">
              <input type="text" [(ngModel)]="recipe.name" class="form-control">
            </ng-container>
            <ng-template #displayData>{{ recipe.name }}</ng-template>
          </td>
          <td>{{ recipe.category }}</td>
          <td>{{ recipe.brand }}</td>
          <td>{{ recipe.customer }}</td>
          <td>{{ recipe.clienttype }}</td>
          <td>
            <button class="bi bi-info-circle" style="margin-inline-start: 40px;" (click)="showDetails(recipe)"></button>
          </td>
          <td>
            <button *ngIf="!recipe.isEditing" class="btn btn-sm btn-primary" style="margin-inline: 3px;" (click)="editRecipe(recipe)">Edit</button>
            <button *ngIf="recipe.isEditing" class="btn btn-sm btn-success" style="margin-inline: 3px;" (click)="updateRecipe(recipe)">Update</button>
            <button *ngIf="!recipe.isEditing" class="btn btn-sm btn-danger" style="margin-inline: 3px;" (click)="deleteRecipe(recipe)">Delete</button>
          </td>
        </tr>
      </ng-container>
    </tbody>
  </table>
  <!-- End Product Table -->
  <br><br>
                                        <!-- Details Table -->
                                        <div class="table-container" *ngIf="selectedRecipe">
                                            <h6 style="font-family: Georgia, 'Times New Roman', Times, serif;">Product with Material Details</h6>
                                            <table class="table-details"
                                                style="font-family: Georgia, 'Times New Roman', Times, serif;">
                                                <tr>
                                                    <th><strong>ID:</strong></th>
                                                    <th>Product Name</th>
                                                    <th>Category</th>
                                                    <th>Brand:</th>
                                                    <th>Customer Type</th>
                                                    <th>Client Type</th>
                                                    <th>Material Name</th>
                                                    <th>Code</th>
                                                    <th>Type</th>
                                                    <th>Quantity</th>
                                                    <th>Cost</th>
                                                    <th>Vendor</th>
                                                    <th>Stock</th>
                                                </tr>
                                                <tr>
                                                    <td>{{ selectedRecipe?.Id }}</td>
                                                    <td>{{ selectedRecipe?.name }}</td>
                                                    <td>{{ selectedRecipe?.category }}</td>
                                                    <td>{{ selectedRecipe?.brand }}</td>
                                                    <td>{{ selectedRecipe?.customer }}</td>
                                                    <td>{{ selectedRecipe?.clienttype }}</td>
                                                    <td>{{ selectedRecipe?.material }}</td>
                                                    <td>{{ selectedRecipe?.mcode }}</td>
                                                    <td>{{ selectedRecipe?.mtype }}</td>
                                                    <td>{{ selectedRecipe?.mquantity }}</td>
                                                    <td>{{ selectedRecipe?.mcost }}</td>
                                                    <td>{{ selectedRecipe?.mvendor }}</td>
                                                    <td>{{ selectedRecipe?.minventory }}</td>
                                                </tr>
                                            </table>
                                        </div>
                                        <!-- End Details Table -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</main>
